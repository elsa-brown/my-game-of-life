const e={play:document.getElementById("play"),clear:document.getElementById("clear"),sound:document.getElementById("sound")},l=.2,n={nature:document.getElementById("audioPlayer"),fire:document.getElementById("fireAudioPlayer")},t={dimension:18,interval:null,cells:{},playing:!1,isClear:!0},a=e=>{const a=(e=>{if(!e)return 0;const l=e+100,n=l?l/(2*t.dimension)*.1:0;return n>.6?.6:n})(e),o=(e=>e?.6-e+l:.4)(a);n.fire.volume=a,n.nature.volume=o},o=e=>{let l,n=0;for(const a in e){const o=t.cells[a],s=e[a],i="dead"===s;i||o===s?i&&(l=document.getElementById(a),l.className=s,"dead"===o?(l.classList.remove("dying"),l.classList.add("gone")):(l.classList.add("dying"),n++)):(l=document.getElementById(a),l.className=s,"alive"===s&&l.classList.add(["bloom1","bloom2","bloom3","bloom4","bloom5"][Math.floor(6*Math.random())])),t.cells[a]=s}a(n)},s=e=>{const l=e.split("-"),n=(e=>e.filter((e=>"alive"===t.cells[e])))(((e,l)=>{let n=[];for(let a=e-1;a<=e+1;a++)for(let o=l-1;o<=l+1;o++)a>=0&&o>=0&&a<t.dimension&&o<t.dimension&&(o!==e||a!==l)&&n.push(`${a}-${o}`);return n})(+l[0],+l[1])).length,a=t.cells[e];let o=a;return"alive"===a?(n<2||n>3)&&(o="dead"):3===n&&(o="alive"),o},i=()=>{const e={...t.cells};for(const l in t.cells){const n=s(l);e[l]=n}o(e)},d=e=>{const l=e.split("-"),n=+l[0],t=+l[1];return Math.floor((n+t)*Math.random())%4==0?"alive":"dormant"};let r=!1;n.nature.volume=l,n.fire.volume=0,e.play.addEventListener("click",(()=>(()=>{if(t.playing)clearInterval(t.interval),e.play.innerHTML="Play",t.playing=!1,t.interval=null;else{const l={...t.cells};for(const e in l)l[e]=t.isClear?d(e):s(e);o(l),e.play.innerHTML="Pause",t.playing=!0,t.isClear=!1,t.interval=setInterval(i,2200)}})())),e.clear.addEventListener("click",(()=>(()=>{const a={...t.cells};for(const e in a)a[e]="dormant";o(a),clearInterval(t.interval),n.nature.volume=l,n.fire.volume=0,e.play.innerHTML="Play",t.playing=!1,t.isClear=!0,t.interval=null})())),e.sound.addEventListener("click",(()=>{r?(n.nature.pause(),n.fire.pause(),e.sound.classList.add("off"),e.sound.setAttribute("aria-label","sound on"),r=!1):(n.nature.play(),n.fire.play(),e.sound.classList.remove("off"),e.sound.setAttribute("aria-label","sound off"),r=!0)})),(()=>{const e=document.getElementById("board");for(let l=0;l<t.dimension;l++){const n=document.createElement("div");n.className="row",n.id=l,e.appendChild(n);for(let e=0;e<t.dimension;e++){const a=`${l}-${e}`;t.cells[a]="dormant";const o=document.createElement("div");o.id=a,o.classList.add("dormant"),n.appendChild(o)}}window.addEventListener("unhandledrejection",(e=>{console.log(e.reason)}))})();
//# sourceMappingURL=index.e6f779d9.js.map
